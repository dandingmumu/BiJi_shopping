import{T as e,Y as t,o as a,i as s,w as l,d as o,f as i,t as n,e as u,q as d,p as r,m as c,J as f}from"./index.59bb86cc.js";import{p as m,d as p,a as h}from"./details.e69fab51.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";var I=_({data:()=>({num:1,nickname:"",iphone:"",remarks:"",attrInfo:{},productInfo:{},uniques:"",product_id:""}),onLoad(e){console.log(e),this.product_id=e.product_id,this.uniques=e.uniques,this.getProductCart(e)},methods:{onSubmitPay(){let a=this;if(""!=this.nickname){if(""!=this.iphone)return/^1[3456789]\d{9}$/.test(this.iphone)?void t.confirm({title:"温馨提示",confirmButtonColor:"#000",cancelButtonColor:"#FF2626",cancelButtonText:"重新输入",messageAlign:"left",message:`姓名：${this.nickname}\n电话：${this.iphone}\n确认无误继续下单支付吗`}).then((()=>{this.$wechat.isWeixin(),m(this.product_id,{num:a.num,mark:a.remarks,uniques:a.uniques,nickname:a.nickname,iphone:a.iphone,from:this.$wechat.isWeixin()?"weixin":"weixinh5"}).then((t=>{let s=t.data.result.jsConfig,l="/pages/users/payOk/index?order_id="+t.data.result.orderInfo.unique;if(t.data.status,void 0===s)return a.$util.Tips({title:"缺少支付参数"});this.$toast.loading({message:"支付中...",forbidClick:!0}),a.$wechat.pay(s).then((()=>a.$Tools.Tips({title:"支付成功",icon:"success"},{tab:5,url:l}))).catch((s=>{p(t.data.result.orderInfo.id).then((t=>{e.fail("取消支付"),a.$util.Tips({title:"取消支付"},{tab:5,url:l+"&status=2"})})).catch((e=>{}))}))})).catch((e=>{}))})).catch((()=>{})):(e.fail("请填写正确的手机号"),!1);e.fail("请输入手机号")}else e.fail("请输入姓名")},getProductCart(t){let a=this;h(t).then((e=>{a.attrInfo=e.data.attrInfo,a.productInfo=e.data.productInfo})).catch((t=>{e.fail(t.msg)}))}}},[["render",function(e,t,m,p,h,_){const I=d,g=r,y=c("van-stepper"),b=f;return a(),s(g,null,{default:l((()=>[o(g,{class:"orderListItem"},{default:l((()=>[o(g,{class:"orderListItem__body"},{default:l((()=>[o(g,{class:"orderListItem__bodyThumbnail"},{default:l((()=>[o(I,{src:h.productInfo.recommend_image,mode:"aspectFill"},null,8,["src"])])),_:1}),o(g,{class:"orderListItem__bodyDetails"},{default:l((()=>[o(g,{class:"title"},{default:l((()=>[i(n(h.productInfo.title),1)])),_:1}),o(g,{class:"info"},{default:l((()=>[i(n(h.attrInfo.suk),1)])),_:1})])),_:1}),o(g,{class:"price"},{default:l((()=>[i(" ￥"+n(h.attrInfo.price),1)])),_:1})])),_:1}),o(g,{style:{"border-top":"1px solid #D8D8D8",width:"90%",margin:"0 auto"}}),o(g,{class:"tkyy-line"},{default:l((()=>[o(g,{class:"tkyy-left"},{default:l((()=>[i("数量 ")])),_:1}),o(g,{class:"tkyy-right"},{default:l((()=>[o(y,{modelValue:h.num,"onUpdate:modelValue":t[0]||(t[0]=e=>h.num=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(g,{class:"userInfo"},{default:l((()=>[o(g,{class:"userInfo-title"},{default:l((()=>[i(" 使用人信息 ")])),_:1}),o(g,{style:{"border-top":"1px solid #D8D8D8",width:"90%",margin:"0 auto"}}),o(g,{class:"userInfo-info"},{default:l((()=>[o(g,{class:"userInfo-info-left"},{default:l((()=>[i("姓名")])),_:1}),o(g,{class:"userInfo-info-right"},{default:l((()=>[o(b,{type:"text",placeholder:"请输入你的姓名",modelValue:h.nickname,"onUpdate:modelValue":t[1]||(t[1]=e=>h.nickname=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(g,{style:{"border-top":"1px solid #D8D8D8",width:"90%",margin:"0 auto"}}),o(g,{class:"userInfo-info"},{default:l((()=>[o(g,{class:"userInfo-info-left"},{default:l((()=>[i("电话")])),_:1}),o(g,{class:"userInfo-info-right"},{default:l((()=>[o(b,{type:"number",placeholder:"请输入你的电话",modelValue:h.iphone,"onUpdate:modelValue":t[2]||(t[2]=e=>h.iphone=e),maxlength:"11"},null,8,["modelValue"])])),_:1})])),_:1}),o(g,{style:{"border-top":"1px solid #D8D8D8",width:"90%",margin:"0 auto"}}),o(g,{class:"userInfo-info"},{default:l((()=>[o(g,{class:"userInfo-info-left"},{default:l((()=>[i("备注")])),_:1}),o(g,{class:"userInfo-info-right"},{default:l((()=>[o(b,{type:"text",placeholder:"请输入你要的信息",modelValue:h.remarks,"onUpdate:modelValue":t[3]||(t[3]=e=>h.remarks=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(g,{class:"zhu"},{default:l((()=>[i(" 注:达人购买成功后，返佣将在我的金库可查看，销后可提现 ")])),_:1}),o(g,{class:"bottom-btn"},{default:l((()=>[o(g,{class:"bottom-price"},{default:l((()=>[i(" 小计："),u("span",{style:{color:"#FF1414"}},"¥"+n((h.attrInfo.price*h.num).toFixed(2)),1)])),_:1}),o(g,{class:"bottom-pay",onClick:_.onSubmitPay},{default:l((()=>[i(" 微信支付 ")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-0e131410"]]);export{I as default};
