import{c as a,g as e,a as t,n as s,o as l,b as n,d as i,w as o,e as c,t as d,f as r,F as u,r as h,h as p,i as m,j as f,k as _,v as g,l as y,m as C,p as w,S as k,q as L,u as v}from"./index.59bb86cc.js";import{T as S,a as I,g as x,b,c as B,d as V}from"./home.897ac596.js";import{_ as D,a as M,b as O,c as N,d as z,e as A}from"./hairdressing.4087145d.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";var j=W({components:{Tabbar:S},data:()=>({cityName:"暂未选择",cityAdCode:0,adCode:0,annunciateOverlayShow:!1,shoppingBanner:[],cityClassifyListData:[],cityClassifyListMeterValue:0,cityClassifyListMeterData:[{meter:1,text:"500M"},{meter:1,text:"1KM"},{meter:1,text:"3KM"},{meter:1,text:"5KM"},{meter:1,text:"10KM"}],cityNames:"全部",recommendValue:0,recommendOptions:[{text:"推荐",value:0},{text:"距离优先",value:1},{text:"销量优先",value:2},{text:"价格优先",value:3}],handleVanStickyShow:!0,areaShow:!1,loading:!1,finished:!1,onLoad:!1,productListData:[],productWhere:{cityAdCode:0,meter:0,page:1,page_size:10,total:0},userInfo:a.get("USER_INFO")}),setup:()=>({areaList:I}),onLoad(){const a=this;e({type:"wgs84",success:function(e){a.getLocation(e.latitude+","+e.longitude)}}),this.userInfo=JSON.parse(this.userInfo)},onShow(){t({title:this.cityName})},methods:{getLocation(a){x(a).then((a=>{const e=a.data.result.ad_info;this.cityName=e.city,this.getCityClassifyList(e.city_code.slice(3)-0),this.getBannerList(e.city_code.slice(3)-0)})).catch((a=>{console.log("请求失败"+a)}))},handleAreaSubmit(a){t({title:a[1].name}),this.cityName=a[1].name,this.areaShow=!1,this.getCityClassifyList(a[1].code)},getBannerList(a){b(a).then((a=>{this.shoppingBanner=a.data})).catch((a=>{console.log("请求错误"+a)}))},handleVanSticky(a){this.handleVanStickyShow=!a},handleAreaShow(a){this.areaShow=a},getCityClassifyList(a){B(a).then((a=>{this.cityClassifyListData=a.data})).catch((a=>{console.log("请求错误: "+a)}))},getProductList(a){V({page:this.productWhere.page,limit:this.productWhere.page_size}).then((a=>{0===a.data.list.length&&(this.productListData=[],this.finished=!0),this.productWhere.total=a.data.count,this.productListData.push(...a.data.list),this.loading=!1,this.productListData.length>=a.data.count&&(this.finished=!0)})).catch((a=>{console.log("请求错误: "+a)}))},handleOnLoad(){let a=setTimeout((()=>{this.getProductList(this.productWhere),this.productWhere.page++,this.finished&&clearTimeout(a)}),100)},handleCityClick(a,e=""){this.adCode=a,0!=a&&this.$refs.cityListDropdownItem.toggle()},handleCityMeterClick(a,e=""){this.cityClassifyListMeterValue=a},gotoDetail(a){s({url:"../details/index?id="+a})}}},[["render",function(a,e,t,s,S,I){const x=C("van-icon"),b=w,B=C("van-field"),V=L,W=v,j=k,U=C("van-col"),F=C("van-row"),K=C("van-dropdown-item"),T=C("van-button"),P=C("van-dropdown-menu"),H=C("van-sticky"),R=C("van-list"),q=C("van-overlay"),E=C("van-area"),J=C("van-popup"),$=C("tabbar");return l(),n(u,null,[i(b,{class:"content"},{default:o((()=>[i(b,{class:"shopping-header"},{default:o((()=>[i(b,{class:"location",onClick:e[0]||(e[0]=a=>S.areaShow=!0)},{default:o((()=>[c("span",null,d(S.cityName),1),i(x,{name:"arrow-down"})])),_:1}),i(b,{class:"annunciate",onClick:e[1]||(e[1]=a=>S.annunciateOverlayShow=!0)},{default:o((()=>[c("img",{class:"annunciateImg",src:D,alt:""}),c("span",null,"放心买，随心退"),i(x,{size:"12",name:"arrow"})])),_:1})])),_:1}),i(b,{class:"shopping-search"},{default:o((()=>[i(x,{name:"search",class:"shopping-search_icon",color:"#999"}),i(B,{class:"shopping-search_s",modelValue:a.value2,"onUpdate:modelValue":e[2]||(e[2]=e=>a.value2=e),autosize:"",clearable:"",autocomplete:"false",placeholder:"请输入关键词搜索"},null,8,["modelValue"]),i(b,{class:"shopping-search_sbtn"},{default:o((()=>[r(" 搜索 ")])),_:1})])),_:1}),i(b,{class:"shopping-banner"},{default:o((()=>[i(j,{class:"my-swipe","indicator-dots":!1,autoplay:!0,interval:3e3,duration:1e3},{default:o((()=>[(l(!0),n(u,null,h(S.shoppingBanner,((a,e)=>(l(),m(W,{class:"swipe-item",key:e},{default:o((()=>[i(V,{style:{width:"100%",height:"100%"},src:a.cover,mode:"aspectFill"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1}),i(b,{class:p(S.handleVanStickyShow?"shopping-menus":"shopping-menus shopping-menusChange")},{default:o((()=>[i(b,{class:p(["shopping-menus__dropdown",S.handleVanStickyShow||"shopping-menusChange"])},{default:o((()=>[i(H,{onChange:I.handleVanSticky},{default:o((()=>[i(P,{class:"shopping-menus__dropdownItem"},{default:o((()=>[i(K,{title:S.cityNames,ref:"cityListDropdownItem"},{default:o((()=>[i(F,{gutter:"20"},{default:o((()=>[i(U,{span:"12"},{default:o((()=>[i(b,{class:"shopping-menus__dropdownHeight cityList"},{default:o((()=>[i(b,{class:p(["cityListItem",0==S.adCode?"on":""]),onClick:e[3]||(e[3]=a=>I.handleCityClick(0))},{default:o((()=>[r(" 全部区域 ")])),_:1},8,["class"]),(l(!0),n(u,null,h(S.cityClassifyListData,((a,e)=>(l(),m(b,{class:p(["cityListItem",S.adCode==a.citycode?"on":""]),key:e,onClick:e=>I.handleCityClick(a.citycode)},{default:o((()=>[r(d(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),i(U,{span:"12"},{default:o((()=>[0==S.adCode?(l(),m(b,{key:0,class:"shopping-menus__dropdownHeight"},{default:o((()=>[i(b,{class:p(["cityListItem",0==S.adCode?"on":""]),onClick:e[4]||(e[4]=a=>I.handleCityClick(0))},{default:o((()=>[r(" 不限 ")])),_:1},8,["class"]),(l(!0),n(u,null,h(S.cityClassifyListMeterData,((a,e)=>(l(),m(b,{class:p(["cityListItem",S.adCode==a.meter?"on":""]),key:e,onClick:e=>I.handleCityMeterClick(a.meter)},{default:o((()=>[r(d(a.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):f("",!0)])),_:1})])),_:1})])),_:1},8,["title"]),i(K,{title:"分类",ref:"item"},null,512),i(K,{modelValue:S.recommendValue,"onUpdate:modelValue":e[5]||(e[5]=a=>S.recommendValue=a),options:S.recommendOptions},null,8,["modelValue","options"]),i(K,{title:"筛选",ref:"item"},{default:o((()=>[i(b,{class:"",style:{margin:"10rpx 20rpx"}},{default:o((()=>[i(F,{gutter:"20"},{default:o((()=>[i(U,{span:"12"},{default:o((()=>[i(T,{type:"default",plain:"",size:"small",block:"",round:"",onClick:e[6]||(e[6]=()=>{})},{default:o((()=>[r(" 重置 ")])),_:1})])),_:1}),i(U,{span:"12"},{default:o((()=>[i(T,{type:"primary",size:"small",block:"",round:"",onClick:e[7]||(e[7]=()=>{})},{default:o((()=>[r(" 确认 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1},8,["onChange"])])),_:1},8,["class"]),_(i(b,{class:"shopping-menus__iconBtn"},{default:o((()=>[i(b,{class:"shopping-menus__iconBtnItem"},{default:o((()=>[c("img",{class:"icon",src:M,alt:"",srcset:""}),c("span",null," 美食餐饮 ")])),_:1}),i(b,{class:"shopping-menus__iconBtnItem"},{default:o((()=>[c("img",{class:"icon",src:O,alt:"",srcset:""}),c("span",null," 休闲娱乐 ")])),_:1}),i(b,{class:"shopping-menus__iconBtnItem"},{default:o((()=>[c("img",{class:"icon",src:N,alt:"",srcset:""}),c("span",null," 酒店住宿 ")])),_:1}),i(b,{class:"shopping-menus__iconBtnItem"},{default:o((()=>[c("img",{class:"icon",src:z,alt:"",srcset:""}),c("span",null," 公园 ")])),_:1}),i(b,{class:"shopping-menus__iconBtnItem"},{default:o((()=>[c("img",{class:"icon",src:A,alt:"",srcset:""}),c("span",null," 美容美发 ")])),_:1})])),_:1},512),[[g,S.handleVanStickyShow]])])),_:1},8,["class"]),i(b,{class:"shopping-productList"},{default:o((()=>[i(R,{loading:S.loading,"onUpdate:loading":e[8]||(e[8]=a=>S.loading=a),finished:S.finished,"finished-text":"没有更多了",onLoad:I.handleOnLoad},{default:o((()=>[(l(!0),n(u,null,h(S.productListData,((a,e)=>(l(),m(b,{key:e,class:"shopping-productListItem",onClick:e=>I.gotoDetail(a.id)},{default:o((()=>[i(b,{class:"infoImg"},{default:o((()=>[i(V,{src:a.recommend_image,mode:"aspectFill"},null,8,["src"])])),_:2},1024),i(b,{class:"infoDescription"},{default:o((()=>[r(d(a.selling_point),1)])),_:2},1024),i(b,{class:"unitPrice"},{default:o((()=>[i(b,null,{default:o((()=>[c("span",{class:"price"},"￥"),c("span",{class:"money"},d(a.preferential_price),1)])),_:2},1024),i(b,{class:"rackRate"},{default:o((()=>[r("门市价￥"+d(a.unit_price),1)])),_:2},1024),null!=S.userInfo&&0!=S.userInfo.is_expert?(l(),m(b,{key:0,class:"return"},{default:o((()=>[c("span",{class:"fan"},"返"),c("span",{class:"fanMoney"},"￥"+d(a.rebate),1)])),_:2},1024)):f("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["loading","finished","onLoad"])])),_:1})])),_:1}),i(q,{"z-index":"1000",show:S.annunciateOverlayShow},{default:o((()=>[c("div",{class:"wrapper",onClick:e[10]||(e[10]=y((()=>{}),["stop"]))},[c("div",{class:"frame"},[i(b,{class:"frameBg"},{default:o((()=>[i(b,{class:"frameBg__title"},{default:o((()=>[r(" 放心买，随心退 ")])),_:1})])),_:1}),i(b,{class:"frameBody"},{default:o((()=>[i(b,{class:"frameBody__title"},{default:o((()=>[r("随心退是什么？")])),_:1}),i(b,{class:"frameBody__content"},{default:o((()=>[r("在爆品商城里购买的商品，在未使用核销的情况下可享受退款无服务费的权益。")])),_:1}),i(b,{class:"frameBody__title"},{default:o((()=>[r("哪些商品可以享受随心退？")])),_:1}),i(b,{class:"frameBody__content"},{default:o((()=>[r("在爆品商城里购买的商品，在未使用核销的情况下可享受退款无服务费的权益。")])),_:1}),i(b,{class:"frameBody__title"},{default:o((()=>[r("已经过期的订单是否可以随心退？")])),_:1}),i(b,{class:"frameBody__content"},{default:o((()=>[r("在爆品商城里购买的商品，在未使用核销的情况下可享受退款无服务费的权益。")])),_:1})])),_:1})]),c("div",{class:"frameClose"},[i(x,{name:"close",size:"65rpx",onClick:e[9]||(e[9]=a=>S.annunciateOverlayShow=!1)})])])])),_:1},8,["show"]),i(J,{show:S.areaShow,"onUpdate:show":e[12]||(e[12]=a=>S.areaShow=a),round:"",position:"bottom"},{default:o((()=>[i(E,{title:"选择城市","confirm-button-text":"","area-list":s.areaList,value:S.cityAdCode,"columns-num":2,onCancel:e[11]||(e[11]=a=>I.handleAreaShow(!1)),onConfirm:I.handleAreaSubmit},null,8,["area-list","value","onConfirm"])])),_:1},8,["show"]),i($)],64)}],["__scopeId","data-v-003dc508"]]);export{j as default};
