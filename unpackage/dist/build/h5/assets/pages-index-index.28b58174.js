var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{c as l,g as n,s as o,a as c,n as d,T as r,o as h,b as u,d as p,w as m,e as g,t as y,f,F as _,r as C,h as k,i as w,j as L,k as v,v as I,l as S,m as b,p as x,S as B,q as D,u as O}from"./index.59bb86cc.js";import{T as V,a as N,g as M,b as j,c as z,d as A,e as P}from"./home.897ac596.js";import{_ as W,a as H,b as T,c as U,d as $,e as F}from"./hairdressing.4087145d.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";var E=K({components:{Tabbar:V},data:()=>({cityName:"暂未选择",cityAdCode:0,adCode:0,annunciateOverlayShow:!1,shoppingBanner:[],cityClassifyListData:[],cityClassifyListMeterValue:0,cityClassifyListMeterData:[{meter:500,text:"500M"},{meter:1e3,text:"1KM"},{meter:3e3,text:"3KM"},{meter:5e3,text:"5KM"},{meter:1e4,text:"10KM"}],cityNames:"全部区域",recommendValue:0,recommendOptions:[{text:"推荐",value:0},{text:"距离优先",value:1},{text:"销量优先",value:2},{text:"价格优先",value:3}],handleVanStickyShow:!0,areaShow:!1,loading:!1,finished:!1,onLoad:!1,productListData:[],productWhere:{cityAdCode:0,meter:0,page:1,page_size:10,total:0},userInfo:l.get("USER_INFO"),categoryValue:0,categoryOptions:[],categoryactive:0,categoryChildList:[],categoryname:"全部分类",categoryactive1:0,mi:0,location:""}),setup:()=>({areaList:N}),onLoad(){const e=this;n({type:"wgs84",success:function(t){o({key:"location",data:t.latitude+","+t.longitude}),e.getLocation(t.latitude+","+t.longitude)}}),null!=this.userInfo&&(this.userInfo=JSON.parse(this.userInfo))},onShow(){c({title:this.cityName})},methods:{getLocation(e){o("location",e),this.location=e,M(e).then((e=>{const t=e.data.result.ad_info;this.cityName=t.city,this.getCityClassifyList(t.city_code.slice(3)-0),this.getBannerList(t.city_code.slice(3)-0),this.getcategory()})).catch((e=>{console.log("请求失败"+e)}))},handleAreaSubmit(e){c({title:e[1].name}),this.cityName=e[1].name,this.areaShow=!1,this.getCityClassifyList(e[1].code)},getBannerList(e){j(e).then((e=>{this.shoppingBanner=e.data})).catch((e=>{console.log("请求错误"+e)}))},handleVanSticky(e){this.handleVanStickyShow=!e},handleAreaShow(e){this.areaShow=e},getCityClassifyList(e){z(e).then((e=>{this.cityClassifyListData=e.data})).catch((e=>{console.log("请求错误: "+e)}))},getProductList(e){A(((e,l)=>{for(var n in l||(l={}))a.call(l,n)&&i(e,n,l[n]);if(t)for(var n of t(l))s.call(l,n)&&i(e,n,l[n]);return e})({page:this.productWhere.page,limit:this.productWhere.page_size},e)).then((e=>{0===e.data.list.length&&(this.productListData=[],this.finished=!0),this.productWhere.total=e.data.count,this.productListData.push(...e.data.list),this.loading=!1,this.productListData.length>=e.data.count&&(this.finished=!0)})).catch((e=>{console.log("请求错误: "+e)}))},handleOnLoad(){let e=setTimeout((()=>{this.getProductList(this.productWhere),this.productWhere.page++,this.finished&&clearTimeout(e)}),100)},handleCityClick(e,t){if(this.adCode=e,this.cityNames=t,"不限"==t)return this.mi=0,this.cityNames="全部区域",this.$refs.cityListDropdownItem.toggle(),void this.searchList();0!=e?(this.$refs.cityListDropdownItem.toggle(),this.searchList()):this.cityNames="全部区域"},handleCityMeterClick(e,t=""){this.cityNames=t,this.mi=e,this.adCode=0,this.$refs.cityListDropdownItem.toggle(),this.searchList()},gotoDetail(e){d({url:"../details/index?id="+e})},getcategory(){let e=this;P().then((t=>{e.categoryOptions=t.data})).catch((e=>{r.fail(e.msg)}))},handlecategoryClick(e){if(this.categoryactive=e,this.categoryOptions.map(((t,a)=>{t.id==e&&(this.categoryChildList=t.children)})),0==e)return this.categoryactive1=0,this.categoryname="全部分类",this.$refs.categoryDropdownItem.toggle(),void this.searchList()},handlecategorynameClick(e,t){this.categoryname=e,this.categoryactive1=t,this.$refs.categoryDropdownItem.toggle(),this.searchList()},searchList(){const e={cid:0!=this.categoryactive1?this.categoryactive1:0,codes:this.adCode,recommend:this.recommendValue,mi:this.mi,location:this.location};this.productWhere.page=1,this.getProductList(e)}}},[["render",function(e,t,a,s,i,l){const n=b("van-icon"),o=x,c=b("van-field"),d=D,r=O,V=B,N=b("van-col"),M=b("van-row"),j=b("van-dropdown-item"),z=b("van-button"),A=b("van-dropdown-menu"),P=b("van-sticky"),K=b("van-list"),E=b("van-overlay"),R=b("van-area"),q=b("van-popup"),J=b("tabbar");return h(),u(_,null,[p(o,{class:"content"},{default:m((()=>[p(o,{class:"shopping-header"},{default:m((()=>[p(o,{class:"location",onClick:t[0]||(t[0]=e=>i.areaShow=!0)},{default:m((()=>[g("span",null,y(i.cityName),1),p(n,{name:"arrow-down"})])),_:1}),p(o,{class:"annunciate",onClick:t[1]||(t[1]=e=>i.annunciateOverlayShow=!0)},{default:m((()=>[g("img",{class:"annunciateImg",src:W,alt:""}),g("span",null,"放心买，随心退"),p(n,{size:"12",name:"arrow"})])),_:1})])),_:1}),p(o,{class:"shopping-search"},{default:m((()=>[p(n,{name:"search",class:"shopping-search_icon",color:"#999"}),p(c,{class:"shopping-search_s",modelValue:e.value2,"onUpdate:modelValue":t[2]||(t[2]=t=>e.value2=t),autosize:"",clearable:"",autocomplete:"false",placeholder:"请输入关键词搜索"},null,8,["modelValue"]),p(o,{class:"shopping-search_sbtn"},{default:m((()=>[f(" 搜索 ")])),_:1})])),_:1}),p(o,{class:"shopping-banner"},{default:m((()=>[p(V,{class:"my-swipe","indicator-dots":!1,autoplay:!0,interval:3e3,duration:1e3},{default:m((()=>[(h(!0),u(_,null,C(i.shoppingBanner,((e,t)=>(h(),w(r,{class:"swipe-item",key:t},{default:m((()=>[p(d,{style:{width:"100%",height:"100%"},src:e.cover,mode:"aspectFill"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1}),p(o,{class:k(i.handleVanStickyShow?"shopping-menus":"shopping-menus shopping-menusChange")},{default:m((()=>[p(o,{class:k(["shopping-menus__dropdown",i.handleVanStickyShow||"shopping-menusChange"])},{default:m((()=>[p(P,{onChange:l.handleVanSticky},{default:m((()=>[p(A,{class:"shopping-menus__dropdownItem"},{default:m((()=>[p(j,{title:i.cityNames,ref:"cityListDropdownItem"},{default:m((()=>[p(M,{gutter:"20"},{default:m((()=>[p(N,{span:"12"},{default:m((()=>[p(o,{class:"shopping-menus__dropdownHeight cityList"},{default:m((()=>[p(o,{class:k(["cityListItem",0==i.adCode?"on":""]),onClick:t[3]||(t[3]=e=>l.handleCityClick(0))},{default:m((()=>[f(" 全城 ")])),_:1},8,["class"]),(h(!0),u(_,null,C(i.cityClassifyListData,((e,t)=>(h(),w(o,{class:k(["cityListItem",i.adCode==e.citycode?"on":""]),key:t,onClick:t=>l.handleCityClick(e.citycode,e.name)},{default:m((()=>[f(y(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),p(N,{span:"12"},{default:m((()=>[0==i.adCode?(h(),w(o,{key:0,class:"shopping-menus__dropdownHeight"},{default:m((()=>[p(o,{class:k(["cityListItem","全部区域"==i.cityNames?"on":""]),onClick:t[4]||(t[4]=e=>l.handleCityClick(0,"不限"))},{default:m((()=>[f(" 不限 ")])),_:1},8,["class"]),(h(!0),u(_,null,C(i.cityClassifyListMeterData,((e,t)=>(h(),w(o,{class:k(["cityListItem",i.cityNames==e.text?"on":""]),key:t,onClick:t=>l.handleCityMeterClick(e.meter,e.text)},{default:m((()=>[f(y(e.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):L("",!0)])),_:1})])),_:1})])),_:1},8,["title"]),p(j,{title:i.categoryname,ref:"categoryDropdownItem",class:"shopping-menus__dropdownItem"},{default:m((()=>[p(M,{gutter:"20"},{default:m((()=>[p(N,{span:"12"},{default:m((()=>[p(o,{class:"shopping-menus__dropdownHeight cityList"},{default:m((()=>[p(o,{class:k(["cityListItem",0==i.categoryactive?"on":""]),onClick:t[5]||(t[5]=e=>l.handlecategoryClick(0))},{default:m((()=>[f(" 全部分类 ")])),_:1},8,["class"]),(h(!0),u(_,null,C(i.categoryOptions,((e,t)=>(h(),w(o,{class:k(["cityListItem",i.categoryactive==e.id?"on":""]),key:t,onClick:t=>l.handlecategoryClick(e.id)},{default:m((()=>[f(y(e.cate_name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),p(N,{span:"12"},{default:m((()=>[0==i.categoryactive?(h(),w(o,{key:0,class:"shopping-menus__dropdownHeight"})):(h(),w(o,{key:1,class:"shopping-menus__dropdownHeight"},{default:m((()=>[(h(!0),u(_,null,C(i.categoryChildList,((e,t)=>(h(),w(o,{class:k(["cityListItem",i.categoryactive1==e.id?"on":""]),key:t,onClick:t=>l.handlecategorynameClick(e.cate_name,e.id)},{default:m((()=>[f(y(e.cate_name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}))])),_:1})])),_:1})])),_:1},8,["title"]),p(j,{modelValue:i.recommendValue,"onUpdate:modelValue":t[6]||(t[6]=e=>i.recommendValue=e),options:i.recommendOptions},null,8,["modelValue","options"]),p(j,{title:"筛选",ref:"item"},{default:m((()=>[p(o,{class:"",style:{margin:"10rpx 20rpx"}},{default:m((()=>[p(M,{gutter:"20"},{default:m((()=>[p(N,{span:"12"},{default:m((()=>[p(z,{type:"default",plain:"",size:"small",block:"",round:"",onClick:t[7]||(t[7]=()=>{})},{default:m((()=>[f(" 重置 ")])),_:1})])),_:1}),p(N,{span:"12"},{default:m((()=>[p(z,{type:"primary",size:"small",block:"",round:"",onClick:t[8]||(t[8]=()=>{})},{default:m((()=>[f(" 确认 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1},8,["onChange"])])),_:1},8,["class"]),v(p(o,{class:"shopping-menus__iconBtn"},{default:m((()=>[p(o,{class:"shopping-menus__iconBtnItem"},{default:m((()=>[g("img",{class:"icon",src:H,alt:"",srcset:""}),g("span",null," 美食餐饮 ")])),_:1}),p(o,{class:"shopping-menus__iconBtnItem"},{default:m((()=>[g("img",{class:"icon",src:T,alt:"",srcset:""}),g("span",null," 休闲娱乐 ")])),_:1}),p(o,{class:"shopping-menus__iconBtnItem"},{default:m((()=>[g("img",{class:"icon",src:U,alt:"",srcset:""}),g("span",null," 酒店住宿 ")])),_:1}),p(o,{class:"shopping-menus__iconBtnItem"},{default:m((()=>[g("img",{class:"icon",src:$,alt:"",srcset:""}),g("span",null," 公园 ")])),_:1}),p(o,{class:"shopping-menus__iconBtnItem"},{default:m((()=>[g("img",{class:"icon",src:F,alt:"",srcset:""}),g("span",null," 美容美发 ")])),_:1})])),_:1},512),[[I,i.handleVanStickyShow]])])),_:1},8,["class"]),p(o,{class:"shopping-productList"},{default:m((()=>[p(K,{loading:i.loading,"onUpdate:loading":t[9]||(t[9]=e=>i.loading=e),finished:i.finished,"finished-text":"没有更多了",onLoad:l.handleOnLoad},{default:m((()=>[(h(!0),u(_,null,C(i.productListData,((e,t)=>(h(),w(o,{key:t,class:"shopping-productListItem",onClick:t=>l.gotoDetail(e.id)},{default:m((()=>[p(o,{class:"infoImg"},{default:m((()=>[p(d,{src:e.recommend_image,mode:"aspectFill"},null,8,["src"])])),_:2},1024),p(o,{class:"infoDescription"},{default:m((()=>[f(y(e.selling_point),1)])),_:2},1024),p(o,{class:"unitPrice"},{default:m((()=>[p(o,null,{default:m((()=>[g("span",{class:"price"},"￥"),g("span",{class:"money"},y(e.preferential_price),1)])),_:2},1024),p(o,{class:"rackRate"},{default:m((()=>[f("门市价￥"+y(e.unit_price),1)])),_:2},1024),null!=i.userInfo&&0!=i.userInfo.is_expert?(h(),w(o,{key:0,class:"return"},{default:m((()=>[g("span",{class:"fan"},"返"),g("span",{class:"fanMoney"},"￥"+y(e.rebate),1)])),_:2},1024)):L("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["loading","finished","onLoad"])])),_:1})])),_:1}),p(E,{"z-index":"1000",show:i.annunciateOverlayShow},{default:m((()=>[g("div",{class:"wrapper",onClick:t[11]||(t[11]=S((()=>{}),["stop"]))},[g("div",{class:"frame"},[p(o,{class:"frameBg"},{default:m((()=>[p(o,{class:"frameBg__title"},{default:m((()=>[f(" 放心买，随心退 ")])),_:1})])),_:1}),p(o,{class:"frameBody"},{default:m((()=>[p(o,{class:"frameBody__title"},{default:m((()=>[f("随心退是什么？")])),_:1}),p(o,{class:"frameBody__content"},{default:m((()=>[f("在爆品商城里购买的商品，在未使用核销的情况下可享受退款无服务费的权益。")])),_:1}),p(o,{class:"frameBody__title"},{default:m((()=>[f("哪些商品可以享受随心退？")])),_:1}),p(o,{class:"frameBody__content"},{default:m((()=>[f("在爆品商城里购买的商品，在未使用核销的情况下可享受退款无服务费的权益。")])),_:1}),p(o,{class:"frameBody__title"},{default:m((()=>[f("已经过期的订单是否可以随心退？")])),_:1}),p(o,{class:"frameBody__content"},{default:m((()=>[f("在爆品商城里购买的商品，在未使用核销的情况下可享受退款无服务费的权益。")])),_:1})])),_:1})]),g("div",{class:"frameClose"},[p(n,{name:"close",size:"65rpx",onClick:t[10]||(t[10]=e=>i.annunciateOverlayShow=!1)})])])])),_:1},8,["show"]),p(q,{show:i.areaShow,"onUpdate:show":t[13]||(t[13]=e=>i.areaShow=e),round:"",position:"bottom"},{default:m((()=>[p(R,{title:"选择城市","confirm-button-text":"","area-list":s.areaList,value:i.cityAdCode,"columns-num":2,onCancel:t[12]||(t[12]=e=>l.handleAreaShow(!1)),onConfirm:l.handleAreaSubmit},null,8,["area-list","value","onConfirm"])])),_:1},8,["show"]),p(J)],64)}],["__scopeId","data-v-206a0f28"]]);export{E as default};
